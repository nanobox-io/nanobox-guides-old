<!DOCTYPE html>
<html>
  <head>
    <head>
      <meta charset='utf-8'>
      <!-- Always force latest IE rendering engine or request Chrome Frame -->
      <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
      <meta content='width=device-width, initial-scale=1.0' name='viewport'>
      <!-- Typekit -->
      <script src='https://use.typekit.net/cqd5kth.js'></script>
      <script>
        try{Typekit.load({ async: true });}catch(e){}
      </script>
      <!-- Google Analytics -->
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-760419-20', 'auto');
        ga('send', 'pageview');
      </script>
    </head>
    <title>Project Setup - Erlang on Nanobox</title>
    <link href="/stylesheets/styles.css" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <link href="/erlang/project-styles.css" rel="stylesheet" type="text/css" />
    <link href='/erlang/img/favicon.png' rel='icon' type='image/png'>
  </head>
  <body class='guide'>
    <div id='header'>
      <a href='/erlang/' id='logo-link'>
        <img src="/images/icons/erlang.svg" />
        <div class='project-title'>
          <p class='name'>Erlang</p>
          <p class='nb'>on Nanobox</p>
        </div>
      </a>
      <a href='/' id='nbg-logo-link'>
        <span class='nbg-logo'>
          <svg enable-background='new 0 0 38 32' id='nbg-logo' space='preserve' version='1.1' viewbox='0 0 38 32' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
            <polyline fill='none' points='&#x000A;			13.6,13 1.5,19 4.8,24.1 8.2,22.4 11.7,27.5 15.1,25.9 18.5,31 36.1,22.2 32.7,17.1 29.4,18.8 25.8,13.6 22.6,15.2 		' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='1.5' stroke='#ffffff'></polyline>
            <line fill='none' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='1.5' stroke='#ffffff' x1='15.2' x2='29.3' y1='25.9' y2='18.8'></line>
            <line fill='none' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='1.5' stroke='#ffffff' x1='8.2' x2='16.9' y1='22.4' y2='18.1'></line>
            <path d='&#x000A;		M25.1,8.2c0,5.6-6.3,11.9-6.3,11.9s-6.3-6.3-6.3-11.9c0-3.5,2.8-6.3,6.3-6.3S25.1,4.7,25.1,8.2z' fill='none' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='1.5' stroke='#ffffff'></path>
            <circle cx='18.8' cy='8.2' fill='none' r='2.6' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='1.5' stroke='#ffffff'></circle>
          </svg>
        </span>
        <span class='nbg-text'>Nanobox Guides</span>
      </a>
    </div>
    <div id='page-body'>
      <div class='wrapper'>
        <div id='left-nav'>
          <div id='contents-btn'>
            <div class='lines'></div>
          </div>
          
          <ul class='closed' id='contents'>
            <li>
              <span>
                <svg enable-background='new 0 0 14 14' space='preserve' version='1.1' viewbox='0 0 14 14' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
                  <g class='nav-bullet'>
                    <rect x='4.5' y='4.5'></rect>
                  </g>
                </svg>
              </span>
              <a href="/erlang/">Getting Started</a>
            </li>
            <li class='active'>
              <span>
                <svg enable-background='new 0 0 14 14' space='preserve' version='1.1' viewbox='0 0 14 14' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
                  <g class='nav-bullet'>
                    <rect x='4.5' y='4.5'></rect>
                  </g>
                </svg>
              </span>
              <a href="/erlang/project-setup/">Project Setup</a>
            </li>
            <li>
              <span>
                <svg enable-background='new 0 0 14 14' space='preserve' version='1.1' viewbox='0 0 14 14' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
                  <g class='nav-bullet'>
                    <rect x='4.5' y='4.5'></rect>
                  </g>
                </svg>
              </span>
              <a href="/erlang/configure/">Configure Your App</a>
            </li>
            <li>
              <span>
                <svg enable-background='new 0 0 14 14' space='preserve' version='1.1' viewbox='0 0 14 14' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
                  <g class='nav-bullet'>
                    <rect x='4.5' y='4.5'></rect>
                  </g>
                </svg>
              </span>
              <a href="/erlang/dev-workflow/">Dev Workflow</a>
            </li>
          </ul>
        </div>
        <div class='guide-content'>
          <h1>Project Setup</h1>
          <p>To setup your app, you need a <a href="https://docs.nanobox.io/app-config/boxfile/">boxfile.yml</a> and to determine what your app needs.</p>
          
          <h2 id="what-does-your-app-need">What Does Your App Need?</h2>
          
          <p>Simple enough. What does your app need? Most Erlang apps will need a web server and some type of database. On Nanobox, these are referred to as &quot;app components&quot;. There are three types of components:</p>
          
          <ul>
          <li><p><strong><em>web:</em></strong><br>
          Web components include the Erlang runtime environment and have ports exposed to the external network making them publicly accessible.</p></li>
          <li><p><strong><em>worker:</em></strong><br>
          Worker components include the Erlang runtime environment, but are meant for running background processes and do not connect with the external network.</p></li>
          <li><p><strong><em>data:</em></strong><br>
          Data components handle application data. They can range anywhere in function from a database to a job queue.</p></li>
          </ul>
          
          <h3 id="specify-your-components">Specify Your Components</h3>
          
          <p>Components are specified in your boxfile.yml. When specifying a component, you need the component type and a unique identifier (uid):</p>
          <pre class="highlight yaml"><code><span class="c1"># Pattern</span>&#x000A;<span class="s">type.uid</span>&#x000A;&#x000A;<span class="c1"># Example</span>&#x000A;<span class="s">web.site</span>&#x000A;</code></pre>
          <p>If your app were to need a Erlang web component and a PostgreSQL database, your boxfile.yml would include something like the following:</p>
          <pre class="highlight yaml"><code><span class="s">web.site</span><span class="pi">:</span>&#x000A;  <span class="na">start</span><span class="pi">:</span> <span class="s1">'</span><span class="s">init.sh</span><span class="nv"> </span><span class="s">start'</span>&#x000A;&#x000A;<span class="s">data.postgres</span><span class="pi">:</span>&#x000A;  <span class="na">image</span><span class="pi">:</span> <span class="s">nanobox/postgresql</span>&#x000A;</code></pre>
          <h4 id="web-amp-worker-components">Web &amp; Worker Components</h4>
          
          <p>Web and worker components each require a <code>start</code> config. This is the command used to start the web/worker process.</p>
          
          <h4 id="data-components">Data Components</h4>
          
          <p>Data components require an <code>image</code> config. Images build and configure your data services. They are essentially Docker images that include scripts unique to Nanobox. You can find all <a href="https://hub.docker.com/r/nanobox/">official Nanobox images on Docker Hub</a>. There are also <a href="/#services">guides for each official data service</a>.</p>
          
          <h2 id="use-environment-variables-for-service-connections">Use Environment Variables for Service Connections</h2>
          
          <p>When using Nanobox, projects are meant to be both portable and secure. For your project to be both, use environment variables in all data service connections.</p>
          
          <p>When data components are provisioned, we generate unique connection credentials for the service. If the same codebase is used for two separate apps, the database connection credentials will be different for each each app. This encourages the recommended security practices of not hard-coding connection credentials in your codebase.</p>
          
          <h3 id="boxfile-amp-connection-example">Boxfile &amp; Connection Example</h3>
          
          <p>The following <code>boxfile.yml</code> specifies a Erlang web service with a PostgreSQL database:</p>
          <pre class="highlight yaml"><code><span class="s">code.build</span><span class="pi">:</span>&#x000A;  <span class="na">engine</span><span class="pi">:</span> <span class="s">erlang</span>&#x000A;&#x000A;<span class="s">web.site</span><span class="pi">:</span>&#x000A;  <span class="na">start</span><span class="pi">:</span> <span class="s1">'</span><span class="s">init.sh</span><span class="nv"> </span><span class="s">start'</span>&#x000A;&#x000A;<span class="s">data.db</span><span class="pi">:</span>&#x000A;  <span class="na">image</span><span class="pi">:</span> <span class="s">nanobox/postgresql</span>&#x000A;</code></pre>
          <p>The following database config uses the <a href="https://docs.nanobox.io/app-config/environment-variables/#auto-generated-environment-variables">auto-generated environment variables</a> to populate the connection credentials.</p>
          <pre class="highlight erlang"><code><span class="p">{</span><span class="n">ok</span><span class="p">,</span> <span class="nv">C</span><span class="p">}</span> <span class="o">=</span> <span class="nn">epgsql</span><span class="p">:</span><span class="nf">connect</span><span class="p">(</span><span class="nn">os</span><span class="p">:</span><span class="nf">getenv</span><span class="p">(</span><span class="nv">DATA_DB_HOST</span><span class="p">),</span> <span class="nn">os</span><span class="p">:</span><span class="nf">getenv</span><span class="p">(</span><span class="nv">DATA_DB_USER</span><span class="p">),</span> <span class="nn">os</span><span class="p">:</span><span class="nf">getenv</span><span class="p">(</span><span class="nv">DATA_DB_PASS</span><span class="p">),</span> <span class="p">[</span>&#x000A;    <span class="p">{</span><span class="n">database</span><span class="p">,</span> <span class="nn">os</span><span class="p">:</span><span class="nf">getenv</span><span class="p">(</span><span class="nv">DATA_DB_NAME</span><span class="p">)},</span>&#x000A;    <span class="p">{</span><span class="n">timeout</span><span class="p">,</span> <span class="mi">4000</span><span class="p">}</span>&#x000A;<span class="p">]),</span>&#x000A;<span class="p">...</span>&#x000A;<span class="n">ok</span> <span class="o">=</span> <span class="nn">epgsql</span><span class="p">:</span><span class="nf">close</span><span class="p">(</span><span class="nv">C</span><span class="p">).</span>&#x000A;</code></pre>
          <p>By using the environment variables to populate connection credentials, this codebase would work out-of-the-box when deployed to a Nanobox app. It also keeps you have having to commit sensitive information to your codebase. For more information about environment variables, view the <a href="https://docs.nanobox.io/app-config/environment-variables/">Environment Variables documentation</a>.</p>
          <div id='pagination'>
            <a name="Getting Started" class="prev" href="/erlang/"><svg enable-background='new 0 0 23 23' id='left-arrow' space='preserve' version='1.1' viewbox='0 0 23 23' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
              <polyline fill='none' points='&#x000A;		10.6,20.4 1.7,11.5 10.6,2.6 	' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' stroke='#FFFFFF'></polyline>
              <line fill='none' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' stroke='#FFFFFF' x1='1.7' x2='21.7' y1='11.5' y2='11.5'></line>
            </svg>
            </a>
            <a name="Configure Your App" class="next" href="/erlang/configure/"><svg enable-background='new 0 0 23 23' id='right-arrow' space='preserve' version='1.1' viewbox='0 0 23 23' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
              <polyline fill='none' points='&#x000A;		12.7,2.6 21.7,11.5 12.7,20.4 	' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' stroke='#FFFFFF'></polyline>
              <line fill='none' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' stroke-width='2' stroke='#FFFFFF' x1='21.7' x2='1.7' y1='11.5' y2='11.5'></line>
            </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div id='footer'>
      <p class='made-with-love'>
        Made with
        <span>
          <svg enable-background='new 0 0 11 10' id='heart' space='preserve' version='1.1' viewbox='0 0 11 10' x='0px' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' y='0px'>
            <path d='M8.1,0.2C7,0.2,6,0.9,5.7,2c-0.3-1-1.3-1.8-2.4-1.8c-1.4,0-2.6,1.1-2.6,2.6c0,2.6,3,4.1,5,7c2-2.9,5-4.2,5-7&#x000A;	C10.7,1.3,9.5,0.2,8.1,0.2z'></path>
          </svg>
        </span>
        by <a href="https://nanobox.io">Nanobox</a>
      </p>
      <p class='license'>
        under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">MPL 2.0</a>
      </p>
      <p class='contribute'>
        Want to contribute to the guides? Checkout our <a href="/contribute/">contribution guidelines</a>.
      </p>
    </div>
  </body>
</html>
